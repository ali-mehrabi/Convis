

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Streams convis.streams &mdash; convis 0.6.4 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="convis 0.6.4 documentation" href="index.html"/>
        <link rel="up" title="The API: Convis classes and modules" href="docs.html"/>
        <link rel="next" title="Optimizers convis.optimizer" href="docs_optimizer.html"/>
        <link rel="prev" title="VirtualRetina-like Simulator" href="docs_retina.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> convis
          

          
          </a>

          
            
            
              <div class="version">
                0.6
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Get Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>
<p class="caption"><span class="caption-text">Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="filters.html">Filters and Layers</a></li>
<li class="toctree-l1"><a class="reference internal" href="pytorch_basics.html">PyTorch Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="pytorch_basics.html#pytorch-extensions-in-convis">PyTorch Extensions in Convis</a></li>
<li class="toctree-l1"><a class="reference internal" href="model.html">Models</a></li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="docs.html">The API: Convis classes and modules</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="docs_filters.html">Filters <cite>convis.filters</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="docs_models.html">Models in <cite>convis.models</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="docs_models.html#module-convis.layers">Finding all Layers in one submodules <cite>convis.layers</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="docs_retina.html">VirtualRetina-like Simulator</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Streams <cite>convis.streams</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="docs_optimizer.html">Optimizers <cite>convis.optimizer</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="docs_tests.html">Automatic Tests <cite>convis.tests</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="docs.html#module-convis.base">Base classes <cite>convis.base</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="docs.html#variables-convis-variables">Variables <cite>convis.variables</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="docs.html#module-convis.utils">Utilitary methods <cite>convis.utils</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="docs.html#sample-data-convis-samples">Sample Data <cite>convis.samples</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="docs.html#module-convis.variable_describe">Methods to describe objects <cite>convis.variable_describe</cite></a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">convis</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="docs.html">The API: Convis classes and modules</a> &raquo;</li>
        
      <li>Streams <cite>convis.streams</cite></li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/docs_streams.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-convis.streams">
<span id="streams-convis-streams"></span><h1>Streams <cite>convis.streams</cite><a class="headerlink" href="#module-convis.streams" title="Permalink to this headline">¶</a></h1>
<p>The streams module contains <cite>Stream</cite> classes that can load different kinds of data.</p>
<p>Streams that are usable currently are: <a class="reference internal" href="#convis.streams.RandomStream" title="convis.streams.RandomStream"><code class="xref py py-class docutils literal"><span class="pre">RandomStream</span></code></a>, <a class="reference internal" href="#convis.streams.SequenceStream" title="convis.streams.SequenceStream"><code class="xref py py-class docutils literal"><span class="pre">SequenceStream</span></code></a> and <a class="reference internal" href="#convis.streams.ImageSequence" title="convis.streams.ImageSequence"><code class="xref py py-class docutils literal"><span class="pre">ImageSequence</span></code></a>.
All others are experimental. If you plan on using any of them, you can open a  <a class="reference external" href="https://github.com/jahuth/convis/labels/enhancement">enhancement</a> issue on the issue tracker.</p>
<p>Since some streams do not have a defined end, the argument <cite>max_t</cite> can specify for how long a model should be executed.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">convis</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">convis</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Retina</span><span class="p">()</span>
<span class="n">inp</span> <span class="o">=</span> <span class="n">convis</span><span class="o">.</span><span class="n">streams</span><span class="o">.</span><span class="n">RandomStream</span><span class="p">((</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">),</span><span class="n">mean</span><span class="o">=</span><span class="mi">127</span><span class="p">,</span><span class="n">level</span><span class="o">=</span><span class="mf">100.0</span><span class="p">)</span>
<span class="n">o</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inp</span><span class="p">,</span><span class="n">dt</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">max_t</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">convis</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">o</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
<p>(<a class="reference external" href=".//docs_streams-1.py">Source code</a>, <a class="reference external" href=".//docs_streams-1.png">png</a>, <a class="reference external" href=".//docs_streams-1.hires.png">hires.png</a>, <a class="reference external" href=".//docs_streams-1.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/docs_streams-1.png" src="_images/docs_streams-1.png" />
</div>
<dl class="class">
<dt id="convis.streams.InrImageStreamer">
<em class="property">class </em><code class="descclassname">convis.streams.</code><code class="descname">InrImageStreamer</code><span class="sig-paren">(</span><em>filename</em>, <em>z=False</em>, <em>slice_at=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/streams.html#InrImageStreamer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.streams.InrImageStreamer" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads a large inr file and is an iterator over all images.</p>
<blockquote>
<div>By default, the z dimension is ignored. Setting <cite>z</cite> to True changes this, such that each image is 3d instead of 2d.</div></blockquote>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This class is not currently maintained and might change without notice between releases.</p>
</div>
<dl class="method">
<dt id="convis.streams.InrImageStreamer.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>i=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/streams.html#InrImageStreamer.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.streams.InrImageStreamer.get" title="Permalink to this definition">¶</a></dt>
<dd><p>outputs the next slice of length <cite>i</cite> in the stream (see <a class="reference internal" href="#convis.streams.Stream" title="convis.streams.Stream"><code class="xref py py-meth docutils literal"><span class="pre">convis.streams.Stream()</span></code></a>)</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="convis.streams.InrImageStreamWriter">
<em class="property">class </em><code class="descclassname">convis.streams.</code><code class="descname">InrImageStreamWriter</code><span class="sig-paren">(</span><em>filename</em>, <em>v=1</em>, <em>x=1</em>, <em>y=1</em>, <em>z=1</em>, <em>time_dimension='VDIM'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/streams.html#InrImageStreamWriter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.streams.InrImageStreamWriter" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This class is not currently maintained and might change without notice between releases.</p>
</div>
</dd></dl>

<dl class="class">
<dt id="convis.streams.InrImageFileStreamer">
<em class="property">class </em><code class="descclassname">convis.streams.</code><code class="descname">InrImageFileStreamer</code><span class="sig-paren">(</span><em>filenames</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/streams.html#InrImageFileStreamer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.streams.InrImageFileStreamer" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This class is not currently maintained and might change without notice between releases.</p>
</div>
</dd></dl>

<dl class="class">
<dt id="convis.streams.Stream">
<em class="property">class </em><code class="descclassname">convis.streams.</code><code class="descname">Stream</code><span class="sig-paren">(</span><em>size=(50</em>, <em>50)</em>, <em>pixel_per_degree=10</em>, <em>t_zero=0.0</em>, <em>t=0.0</em>, <em>dt=0.001</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/streams.html#Stream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.streams.Stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Stream Base Class</p>
<p>Streams have to have methods to either <cite>get(i)</cite>
or <cite>put</cite> a frame.</p>
<blockquote>
<div><ul class="simple">
<li><cite>get(i)</cite> takes <cite>i</cite> frames from the stream and changes the internal state.</li>
<li><cite>put(t)</cite> inserts a <cite>torch.Tensor</cite> or <cite>numpy.ndarray</cite> into the stream (eg. saving it into a file).</li>
</ul>
</div></blockquote>
<dl class="method">
<dt id="convis.streams.Stream.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>i</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/streams.html#Stream.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.streams.Stream.get" title="Permalink to this definition">¶</a></dt>
<dd><p>outputs the next slice of length <cite>i</cite> in the stream (see <a class="reference internal" href="#convis.streams.Stream" title="convis.streams.Stream"><code class="xref py py-meth docutils literal"><span class="pre">convis.streams.Stream()</span></code></a>)</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="convis.streams.ProcessingStream">
<em class="property">class </em><code class="descclassname">convis.streams.</code><code class="descname">ProcessingStream</code><span class="sig-paren">(</span><em>input_stream</em>, <em>model</em>, <em>pre=None</em>, <em>post=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/streams.html#ProcessingStream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.streams.ProcessingStream" title="Permalink to this definition">¶</a></dt>
<dd><p>Combines a stream and a <cite>Layer</cite> (model or filter) into a new stream.</p>
<p>Each slice will be processed at once (using <cite>Layer.__call__</cite>, not <cite>Layer.run</cite>), 
so a limited number of frames should be requested at any one time.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.6.4.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>input_stream</strong> : <cite>convis.streams.Stream</cite></p>
<blockquote>
<div><p>The stream that is used as input to the model</p>
</div></blockquote>
<p><strong>model</strong> : <cite>convis.Layer</cite></p>
<blockquote>
<div><p>The model that transforms slices of the <cite>input_stream</cite> into outputs</p>
</div></blockquote>
<p><strong>pre</strong> : function or None</p>
<blockquote>
<div><p>Optional operation to be done one each slice before handing it to the model.</p>
</div></blockquote>
<p><strong>post</strong> : function or None</p>
<blockquote class="last">
<div><p>Optional operation to be done one each slice after the model has processed it.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>To recreate the neuromorphic MNIST stream one can combine the MNIST stream and a <cite>Poisson</cite> layer.
The output of the MNIST stream can be scaled with a function passed to <cite>pre</cite>.</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">convis</span>
<span class="n">stream</span> <span class="o">=</span> <span class="n">convis</span><span class="o">.</span><span class="n">streams</span><span class="o">.</span><span class="n">MNISTStream</span><span class="p">(</span><span class="s1">&#39;../data&#39;</span><span class="p">,</span><span class="n">rep</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">convis</span><span class="o">.</span><span class="n">filters</span><span class="o">.</span><span class="n">spiking</span><span class="o">.</span><span class="n">Poisson</span><span class="p">()</span>
<span class="n">stream2</span> <span class="o">=</span> <span class="n">convis</span><span class="o">.</span><span class="n">streams</span><span class="o">.</span><span class="n">ProcessingStream</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span><span class="n">model</span><span class="p">,</span><span class="n">pre</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mf">0.1</span><span class="o">*</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="convis.streams.RandomStream">
<em class="property">class </em><code class="descclassname">convis.streams.</code><code class="descname">RandomStream</code><span class="sig-paren">(</span><em>size=(50</em>, <em>50)</em>, <em>pixel_per_degree=10</em>, <em>level=1.0</em>, <em>mean=0.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/streams.html#RandomStream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.streams.RandomStream" title="Permalink to this definition">¶</a></dt>
<dd><p>creates a stream of random frames.</p>
<p class="rubric">Examples</p>
<p>(<a class="reference external" href=".//docs_streams-2.py">Source code</a>, <a class="reference external" href=".//docs_streams-2.png">png</a>, <a class="reference external" href=".//docs_streams-2.hires.png">hires.png</a>, <a class="reference external" href=".//docs_streams-2.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/docs_streams-2.png" src="_images/docs_streams-2.png" />
</div>
<dl class="method">
<dt id="convis.streams.RandomStream.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>i</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/streams.html#RandomStream.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.streams.RandomStream.get" title="Permalink to this definition">¶</a></dt>
<dd><p>outputs the next slice of length <cite>i</cite> in the stream (see <a class="reference internal" href="#convis.streams.Stream" title="convis.streams.Stream"><code class="xref py py-meth docutils literal"><span class="pre">convis.streams.Stream()</span></code></a>)</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="convis.streams.SequenceStream">
<em class="property">class </em><code class="descclassname">convis.streams.</code><code class="descname">SequenceStream</code><span class="sig-paren">(</span><em>sequence=array([]</em>, <em>shape=(0</em>, <em>50</em>, <em>50)</em>, <em>dtype=float64)</em>, <em>size=None</em>, <em>pixel_per_degree=10</em>, <em>max_frames=5000</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/streams.html#SequenceStream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.streams.SequenceStream" title="Permalink to this definition">¶</a></dt>
<dd><p>3d Numpy array that represents a sequence of images</p>
<blockquote>
<div><div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This class is not currently maintained and might change without notice between releases.</p>
</div>
</div></blockquote>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">convis</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">200</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">))</span>
<span class="n">x</span><span class="p">[:,</span><span class="mi">10</span><span class="p">,:]</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="n">x</span><span class="p">[:,</span><span class="mi">20</span><span class="p">,:]</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="n">x</span><span class="p">[:,</span><span class="mi">30</span><span class="p">,:]</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="n">x</span> <span class="o">*=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">12.0</span><span class="p">,</span><span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]))[:,</span><span class="bp">None</span><span class="p">,</span><span class="bp">None</span><span class="p">]</span>
<span class="n">x</span> <span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">12.0</span><span class="p">,</span><span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]))[</span><span class="bp">None</span><span class="p">,:,</span><span class="bp">None</span><span class="p">]</span>
<span class="n">inp</span> <span class="o">=</span> <span class="n">convis</span><span class="o">.</span><span class="n">streams</span><span class="o">.</span><span class="n">SequenceStream</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">convis</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">inp</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
</pre></div>
</div>
<p>(<a class="reference external" href=".//docs_streams-3.py">Source code</a>, <a class="reference external" href=".//docs_streams-3.png">png</a>, <a class="reference external" href=".//docs_streams-3.hires.png">hires.png</a>, <a class="reference external" href=".//docs_streams-3.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/docs_streams-3.png" src="_images/docs_streams-3.png" />
</div>
<dl class="method">
<dt id="convis.streams.SequenceStream.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>i</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/streams.html#SequenceStream.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.streams.SequenceStream.get" title="Permalink to this definition">¶</a></dt>
<dd><p>outputs the next slice of length <cite>i</cite> in the stream (see <a class="reference internal" href="#convis.streams.Stream" title="convis.streams.Stream"><code class="xref py py-meth docutils literal"><span class="pre">convis.streams.Stream()</span></code></a>)</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="convis.streams.RepeatingStream">
<em class="property">class </em><code class="descclassname">convis.streams.</code><code class="descname">RepeatingStream</code><span class="sig-paren">(</span><em>sequence=array([]</em>, <em>shape=(0</em>, <em>50</em>, <em>50)</em>, <em>dtype=float64)</em>, <em>size=None</em>, <em>pixel_per_degree=10</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/streams.html#RepeatingStream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.streams.RepeatingStream" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This class is not currently maintained and might change without notice between releases.</p>
</div>
<dl class="method">
<dt id="convis.streams.RepeatingStream.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>i</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/streams.html#RepeatingStream.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.streams.RepeatingStream.get" title="Permalink to this definition">¶</a></dt>
<dd><p>outputs the next slice of length <cite>i</cite> in the stream (see <a class="reference internal" href="#convis.streams.Stream" title="convis.streams.Stream"><code class="xref py py-meth docutils literal"><span class="pre">convis.streams.Stream()</span></code></a>)</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="convis.streams.TimedSequenceStream">
<em class="property">class </em><code class="descclassname">convis.streams.</code><code class="descname">TimedSequenceStream</code><span class="sig-paren">(</span><em>sequence=array([]</em>, <em>shape=(0</em>, <em>50</em>, <em>50)</em>, <em>dtype=float64)</em>, <em>size=None</em>, <em>pixel_per_degree=10</em>, <em>t_zero=0.0</em>, <em>dt=0.001</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/streams.html#TimedSequenceStream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.streams.TimedSequenceStream" title="Permalink to this definition">¶</a></dt>
<dd><p>3d Numpy array that represents a sequence of images</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This class is not currently maintained and might change without notice between releases.</p>
</div>
</dd></dl>

<dl class="class">
<dt id="convis.streams.TimedResampleStream">
<em class="property">class </em><code class="descclassname">convis.streams.</code><code class="descname">TimedResampleStream</code><span class="sig-paren">(</span><em>stream</em>, <em>t_zero=0.0</em>, <em>dt=0.001</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/streams.html#TimedResampleStream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.streams.TimedResampleStream" title="Permalink to this definition">¶</a></dt>
<dd><p>3d Numpy array that represents a sequence of images</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This class is not currently maintained and might change without notice between releases.</p>
</div>
</dd></dl>

<dl class="class">
<dt id="convis.streams.NumpyReader">
<em class="property">class </em><code class="descclassname">convis.streams.</code><code class="descname">NumpyReader</code><span class="sig-paren">(</span><em>file_ref</em>, <em>size=None</em>, <em>pixel_per_degree=10</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/streams.html#NumpyReader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.streams.NumpyReader" title="Permalink to this definition">¶</a></dt>
<dd><p>reads a numpy file.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This class is not currently maintained and might change without notice between releases.</p>
</div>
<dl class="method">
<dt id="convis.streams.NumpyReader.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>i=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/streams.html#NumpyReader.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.streams.NumpyReader.get" title="Permalink to this definition">¶</a></dt>
<dd><p>outputs the next slice of length <cite>i</cite> in the stream (see <a class="reference internal" href="#convis.streams.Stream" title="convis.streams.Stream"><code class="xref py py-meth docutils literal"><span class="pre">convis.streams.Stream()</span></code></a>)</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="convis.streams.VideoReader">
<em class="property">class </em><code class="descclassname">convis.streams.</code><code class="descname">VideoReader</code><span class="sig-paren">(</span><em>filename=0</em>, <em>size=(50</em>, <em>50)</em>, <em>offset=None</em>, <em>dt=0.041666666666666664</em>, <em>mode='mean'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/streams.html#VideoReader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.streams.VideoReader" title="Permalink to this definition">¶</a></dt>
<dd><p><cite>filename</cite> can be either a device number or the path to a video file.
The file will be opened as such: <cite>cv2.VideoCapture(filename)</cite></p>
<p>If only one camera is connected, it can be selected with <cite>0</cite>.
If more than one camera is connected,</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This class is not currently maintained and might change without notice between releases.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>filename (int or str):</strong></p>
<blockquote>
<div><p>a string containing the url/path to a file or a number signifying a camera</p>
</div></blockquote>
<p><strong>size (tuple of int, int):</strong></p>
<blockquote>
<div><p>The size of the frames cut from the video</p>
</div></blockquote>
<p><strong>offset (None or tuple of int, int):</strong></p>
<blockquote>
<div><p>The offset of the part cut from the video</p>
</div></blockquote>
<p><strong>dt (float):</strong></p>
<blockquote>
<div><p>(does nothing right now)</p>
</div></blockquote>
<p><strong>mode (str):</strong></p>
<blockquote class="last">
<div><p>color mode: ‘mean’, ‘r’, ‘g’, ‘b’ or ‘rgb’
Default is taking the mean over all color channels
‘rgb’ will give a 5d output (does not work with all Output Streams)</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.6.4.</span></p>
</div>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">convis</span>
<span class="n">vid_in</span> <span class="o">=</span> <span class="n">convis</span><span class="o">.</span><span class="n">streams</span><span class="o">.</span><span class="n">VideoReader</span><span class="p">(</span><span class="s1">&#39;/home/jacob/convis/input.avi&#39;</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">),</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;rgb&#39;</span><span class="p">)</span>
<span class="n">convis</span><span class="o">.</span><span class="n">plot_tensor</span><span class="p">(</span><span class="n">vid_in</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">5000</span><span class="p">))</span> <span class="c1"># shows three channels</span>
</pre></div>
</div>
<p>(<a class="reference external" href=".//docs_streams-4.py">Source code</a>, <a class="reference external" href=".//docs_streams-4.png">png</a>, <a class="reference external" href=".//docs_streams-4.hires.png">hires.png</a>, <a class="reference external" href=".//docs_streams-4.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/docs_streams-4.png" src="_images/docs_streams-4.png" />
</div>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">convis</span>
<span class="n">vid_in</span> <span class="o">=</span> <span class="n">convis</span><span class="o">.</span><span class="n">streams</span><span class="o">.</span><span class="n">VideoReader</span><span class="p">(</span><span class="s1">&#39;some_video.mp4&#39;</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">),</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;mean&#39;</span><span class="p">)</span>
<span class="n">retina</span> <span class="o">=</span> <span class="n">convis</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Retina</span><span class="p">()</span>
<span class="n">o</span> <span class="o">=</span> <span class="n">retina</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">vid_in</span><span class="p">,</span> <span class="n">dt</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">max_t</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span> <span class="c1"># run for 2000 frames</span>
</pre></div>
</div>
<dl class="method">
<dt id="convis.streams.VideoReader.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>i</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/streams.html#VideoReader.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.streams.VideoReader.get" title="Permalink to this definition">¶</a></dt>
<dd><p>outputs the next slice of length <cite>i</cite> in the stream (see <a class="reference internal" href="#convis.streams.Stream" title="convis.streams.Stream"><code class="xref py py-meth docutils literal"><span class="pre">convis.streams.Stream()</span></code></a>)</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="convis.streams.VideoWriter">
<em class="property">class </em><code class="descclassname">convis.streams.</code><code class="descname">VideoWriter</code><span class="sig-paren">(</span><em>filename='output.avi'</em>, <em>size=(50</em>, <em>50)</em>, <em>codec='XVID'</em>, <em>isColor=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/streams.html#VideoWriter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.streams.VideoWriter" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes data to a video</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This class is not currently maintained and might change without notice between releases.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>filename (str):</strong></p>
<blockquote>
<div><p>Video file where output should be written to (extension determines format)</p>
</div></blockquote>
<p><strong>size ((int,int) tuple):</strong></p>
<blockquote>
<div><p>the size of the output</p>
</div></blockquote>
<p><strong>codec (str):</strong></p>
<blockquote>
<div><p>possible codecs: ‘DIVX’, ‘XVID’, ‘MJPG’, ‘X264’, ‘WMV1’, ‘WMV2’
(see also: <a href="#id2"><span class="problematic" id="id3">`http://www.fourcc.org/codecs.php`_</span></a> )
default: ‘XVID’</p>
</div></blockquote>
<p><strong>isColor (bool):</strong></p>
<blockquote class="last">
<div><p>whether the video is written in color or grey scale
If color input is written to the file when isColor is False, the mean over all channels will be taken
If the input is bw and isColor is True, the color channels will be duplicated (resulting in a bw image).</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.6.4.</span></p>
</div>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p><a class="reference internal" href="#convis.streams.VideoReader" title="convis.streams.VideoReader"><code class="xref py py-class docutils literal"><span class="pre">VideoReader</span></code></a> and <a class="reference internal" href="#convis.streams.VideoWriter" title="convis.streams.VideoWriter"><code class="xref py py-class docutils literal"><span class="pre">VideoWriter</span></code></a> work together in color and black/white:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">convis</span>
<span class="n">vid_in</span> <span class="o">=</span> <span class="n">convis</span><span class="o">.</span><span class="n">streams</span><span class="o">.</span><span class="n">VideoReader</span><span class="p">(</span><span class="n">some_video</span><span class="o">.</span><span class="n">mp4</span><span class="s1">&#39;,size=(200,200),mode=&#39;</span><span class="n">rgb</span><span class="s1">&#39;)</span>
<span class="n">vid_out</span> <span class="o">=</span> <span class="n">convis</span><span class="o">.</span><span class="n">streams</span><span class="o">.</span><span class="n">VideoWriter</span><span class="p">(</span><span class="s1">&#39;test.mp4&#39;</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">),</span><span class="n">codec</span><span class="o">=</span><span class="s1">&#39;X264&#39;</span><span class="p">)</span>
<span class="n">vid_out</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">vid_in</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">1000</span><span class="p">))</span> <span class="c1"># copy 1000 color frames</span>
<span class="n">vid_out</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">vid_in</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">convis</span>
<span class="n">vid_in</span> <span class="o">=</span> <span class="n">convis</span><span class="o">.</span><span class="n">streams</span><span class="o">.</span><span class="n">VideoReader</span><span class="p">(</span><span class="s1">&#39;some_video.mp4&#39;</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">),</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;mean&#39;</span><span class="p">)</span>
<span class="n">vid_out</span> <span class="o">=</span> <span class="n">convis</span><span class="o">.</span><span class="n">streams</span><span class="o">.</span><span class="n">VideoWriter</span><span class="p">(</span><span class="s1">&#39;test.mp4&#39;</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">),</span><span class="n">isColor</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">vid_out</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">vid_in</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">1000</span><span class="p">))</span> <span class="c1"># copy 1000 black-and-white frames</span>
<span class="n">vid_out</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">vid_in</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="convis.streams.ImageSequence">
<em class="property">class </em><code class="descclassname">convis.streams.</code><code class="descname">ImageSequence</code><span class="sig-paren">(</span><em>filenames='*.jpg'</em>, <em>size=(50</em>, <em>50)</em>, <em>repeat=1</em>, <em>offset=None</em>, <em>is_color=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/streams.html#ImageSequence"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.streams.ImageSequence" title="Permalink to this definition">¶</a></dt>
<dd><p>loads a sequence of images so they can be processed by convis</p>
<p>The image values will be scaled between 0 and 256.</p>
<p>When <cite>is_color</cite> is True, it returns a 5d array with dimensions [0,color_channel,time,x,y].</p>
<p>If <cite>offset</cite> is <cite>None</cite>, the crop will be chosen as the center of the image.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This function is not stable and might change without notice between releases.
To create stable code it is currently recommended to load input manually into numpy arrays.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>filenames</strong> :  str or list</p>
<blockquote>
<div><p>List of filenames or a wildcard expression (eg. ‘frame_*.jpeg’) of the images to load.</p>
</div></blockquote>
<p><strong>size</strong> : two tuple (int,int)</p>
<blockquote>
<div><p>the size the output image should be cropped to</p>
</div></blockquote>
<p><strong>repeat</strong> : int</p>
<blockquote>
<div><p>how often each image should be repeated (eg. 100 to show a new image after 100 frames)</p>
</div></blockquote>
<p><strong>offset</strong> : None or (int,int)</p>
<blockquote>
<div><p>offset of the crop from the top left corner of the image</p>
</div></blockquote>
<p><strong>is_color</strong> : bool</p>
<blockquote class="last">
<div><p>Whether images should be interpreted as color or grayscale. If <cite>is_color</cite> is True, this stream gives a 5d output.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Choosing a crop with <cite>size</cite> and <cite>offset</cite>:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">convis</span>
<span class="n">inp</span> <span class="o">=</span> <span class="n">convis</span><span class="o">.</span><span class="n">streams</span><span class="o">.</span><span class="n">ImageSequence</span><span class="p">(</span><span class="s1">&#39;cat.png&#39;</span><span class="p">,</span> <span class="n">repeat</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">offset</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">50</span><span class="p">))</span>
</pre></div>
</div>
<p>Creating a 500 frame input:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">inp</span> <span class="o">=</span> <span class="n">convis</span><span class="o">.</span><span class="n">streams</span><span class="o">.</span><span class="n">ImageSequence</span><span class="p">([</span><span class="s1">&#39;cat.png&#39;</span><span class="p">]</span><span class="o">*</span><span class="mi">500</span><span class="p">)</span>
<span class="n">convis</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">inp</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
</pre></div>
</div>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">inp</span> <span class="o">=</span> <span class="n">convis</span><span class="o">.</span><span class="n">streams</span><span class="o">.</span><span class="n">ImageSequence</span><span class="p">(</span><span class="s1">&#39;cat.png&#39;</span><span class="p">,</span> <span class="n">repeat</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
<span class="n">convis</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">inp</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
</pre></div>
</div>
<p>Loading multiple images:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">inp</span> <span class="o">=</span> <span class="n">convis</span><span class="o">.</span><span class="n">streams</span><span class="o">.</span><span class="n">ImageSequence</span><span class="p">(</span><span class="s1">&#39;frame_*.png&#39;</span><span class="p">,</span> <span class="n">repeat</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">convis</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">inp</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
</pre></div>
</div>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">inp</span> <span class="o">=</span> <span class="n">convis</span><span class="o">.</span><span class="n">streams</span><span class="o">.</span><span class="n">ImageSequence</span><span class="p">([</span><span class="s1">&#39;cat.png&#39;</span><span class="p">,</span><span class="s1">&#39;dog.png&#39;</span><span class="p">,</span><span class="s1">&#39;parrot.png&#39;</span><span class="p">],</span> <span class="n">repeat</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
<span class="n">convis</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">inp</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
</pre></div>
</div>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="45%" />
<col width="55%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>self.i (int) :</strong></td>
<td>internal frame counter</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>get(i)</strong></td>
<td>retrieve a sequence of <cite>i</cite> frames. Advances the internal counter.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="convis.streams.ImageSequence.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>i</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/streams.html#ImageSequence.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.streams.ImageSequence.get" title="Permalink to this definition">¶</a></dt>
<dd><p>outputs the next slice of length <cite>i</cite> in the stream (see <a class="reference internal" href="#convis.streams.Stream" title="convis.streams.Stream"><code class="xref py py-meth docutils literal"><span class="pre">convis.streams.Stream()</span></code></a>)</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="convis.streams.MNISTStream">
<em class="property">class </em><code class="descclassname">convis.streams.</code><code class="descname">MNISTStream</code><span class="sig-paren">(</span><em>data_folder='./mnist_data'</em>, <em>rep=10</em>, <em>max_value=1.0</em>, <em>init=None</em>, <em>advance=179425529</em>, <em>include_label=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/streams.html#MNISTStream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.streams.MNISTStream" title="Permalink to this definition">¶</a></dt>
<dd><p>Downloads MNIST data and displays random digits.</p>
<p>The digits are chosen pseudo randomly using a starting value <cite>init</cite> and a (large) advancing value.
If both values are supplied, the stream will return the same sequence of numbers.
By default, <cite>init</cite> is chosen randomly and <cite>advance</cite> is set to an arbitrary (but fixed) high prime number.
If <cite>advance</cite> shares factors with the number of samples in MNIST, not all examples will be covered!</p>
<p>If <cite>include_label</cite> is True, the output will contain a second channel with the matching label.
(Currently, there is no automated way to pass this along with the other channel)</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The way the label is encoded might change depending on how people want to use it.
Please <a class="reference external" href="https://github.com/jahuth/convis/labels/enhancement">submitting a github issue if you have in idea how to pass labels along with the input</a>!</p>
</div>
<p>The output of the stream will be frames of <cite>28 x 28</cite> pixels.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.6.4.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>data_folder</strong> : str</p>
<blockquote>
<div><p>A (relative or absolute) path where the MNIST data should be downloaded to.
If a valid download is found at that location, the existing data will be used.
This stream uses <cite>torchvision</cite> to download and extract the data, more info about the downloader can be found <a class="reference external" href="https://pytorch.org/docs/stable/torchvision/datasets.html#mnist">here</a>.</p>
</div></blockquote>
<p><strong>rep</strong> : int</p>
<blockquote>
<div><p>Number of frames each digit should be repeated</p>
</div></blockquote>
<p><strong>max_value</strong> : float</p>
<blockquote>
<div><p>The stimuli will have normalized values between 0 and <cite>max_value</cite>.</p>
</div></blockquote>
<p><strong>init</strong> : int or None</p>
<blockquote>
<div><p>The starting point of the pseudo-random walk through the examples.
If the value is <cite>None</cite>, it is chosen randomly with uniform probability.</p>
</div></blockquote>
<p><strong>advance</strong> : int</p>
<blockquote>
<div><p>A large number that determines the next sample.
If this value is not touched, it will generate pseudo-random walks starting deterministically from <cite>init</cite>.</p>
</div></blockquote>
<p><strong>include_label</strong> : bool</p>
<blockquote>
<div><p>Whether to include an additional channel carrying the labels or not (default: <cite>False</cite>)</p>
</div></blockquote>
<p><strong>buffer</strong> : <cite>torch.Tensor</cite></p>
<blockquote class="last">
<div><p>the MNIST dataset</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#convis.streams.PoissonMNISTStream" title="convis.streams.PoissonMNISTStream"><code class="xref py py-obj docutils literal"><span class="pre">convis.streams.PoissonMNISTStream</span></code></a>, <a class="reference internal" href="#convis.streams.PseudoNMNIST" title="convis.streams.PseudoNMNIST"><code class="xref py py-obj docutils literal"><span class="pre">convis.streams.PseudoNMNIST</span></code></a></p>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">convis</span>
<span class="kn">from</span> <span class="nn">matplotlib.pylab</span> <span class="kn">import</span> <span class="n">plot</span><span class="p">,</span> <span class="n">xlim</span><span class="p">,</span> <span class="n">gcf</span>
<span class="n">stream</span> <span class="o">=</span> <span class="n">convis</span><span class="o">.</span><span class="n">streams</span><span class="o">.</span><span class="n">MNISTStream</span><span class="p">(</span><span class="s1">&#39;../data&#39;</span><span class="p">,</span><span class="n">rep</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">convis</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">500</span><span class="p">))</span>
<span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">convis</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">500</span><span class="p">))</span>
<span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">stream</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span> <span class="c1"># returning to the start</span>
<span class="n">convis</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">500</span><span class="p">))</span>
<span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href=".//docs_streams-5.py">Source code</a>, <a class="reference external" href=".//docs_streams-5.png">png</a>, <a class="reference external" href=".//docs_streams-5.hires.png">hires.png</a>, <a class="reference external" href=".//docs_streams-5.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/docs_streams-5.png" src="_images/docs_streams-5.png" />
</div>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="86%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>i</strong></td>
<td>(int) index of current image.</td>
</tr>
<tr class="row-even"><td><strong>j</strong></td>
<td>(int) number of repetitions already displayed (secondary index)</td>
</tr>
<tr class="row-odd"><td><strong>init_i</strong></td>
<td>(int) The initial starting point of the walk.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="convis.streams.MNISTStream.reset">
<code class="descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/streams.html#MNISTStream.reset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.streams.MNISTStream.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the random walk to the starting point (<cite>self.init_i</cite>).</p>
</dd></dl>

<dl class="method">
<dt id="convis.streams.MNISTStream.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>i=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/streams.html#MNISTStream.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.streams.MNISTStream.get" title="Permalink to this definition">¶</a></dt>
<dd><p>outputs the next slice of length <cite>i</cite> in the stream (see <a class="reference internal" href="#convis.streams.Stream" title="convis.streams.Stream"><code class="xref py py-meth docutils literal"><span class="pre">convis.streams.Stream()</span></code></a>)</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="convis.streams.PoissonMNISTStream">
<em class="property">class </em><code class="descclassname">convis.streams.</code><code class="descname">PoissonMNISTStream</code><span class="sig-paren">(</span><em>data_folder='./mnist_data'</em>, <em>rep=10</em>, <em>fr=0.05</em>, <em>init=None</em>, <em>advance=179425529</em>, <em>include_label=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/streams.html#PoissonMNISTStream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.streams.PoissonMNISTStream" title="Permalink to this definition">¶</a></dt>
<dd><p>Downloads MNIST data and generates Poisson spiking for random digits.</p>
<p>This definition of a neuromorphic version of the MNIST data set follows eg.:</p>
<blockquote>
<div><ul class="simple">
<li><ol class="first upperalpha" start="16">
<li>Diehl and M. Cook. Unsupervised learning of digit recognition using spike-timing-dependent plasticity. Frontiers in Computational Neuroscience, 9(99), 2015.</li>
</ol>
</li>
<li><ol class="first upperalpha" start="4">
<li>Querlioz, O. Bichler, P. Dollfus, and C. Gamrat. Immunity to device variations in a spiking neural network with memristive nanodevices. IEEE Transactions on Nanotechnology, 12:288-295, 2013.</li>
</ol>
</li>
</ul>
</div></blockquote>
<p>An alternative interpretation are events that are created by saccade-like movements over the images.</p>
<p>The digits are chosen pseudo randomly using a starting value <cite>init</cite> and a (large) advancing value.
If both values are supplied, the stream will return the same sequence of numbers.
By default, <cite>init</cite> is chosen randomly and <cite>advance</cite> is set to an arbitrary (but fixed) high prime number.
If <cite>advance</cite> shares factors with the number of samples in MNIST, not all examples will be covered!</p>
<p>If <cite>include_label</cite> is True, the output will contain a second channel with the matching label.
(Currently, there is no automated way to pass this along with the other channel)</p>
<p>The output of the stream will be frames of <cite>28 x 28</cite> pixels of binary coded spike trains.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.6.4.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>data_folder</strong> : str</p>
<blockquote>
<div><p>A (relative or absolute) path where the MNIST data should be downloaded to.
If a valid download is found at that location, the existing data will be used.
This stream uses <cite>torchvision</cite> to download and extract the data, more info about the downloader can be found <a class="reference external" href="https://pytorch.org/docs/stable/torchvision/datasets.html#mnist">here</a>.</p>
</div></blockquote>
<p><strong>rep</strong> : int</p>
<blockquote>
<div><p>Number of frames each digit should be repeated</p>
</div></blockquote>
<p><strong>fr</strong> : float</p>
<blockquote>
<div><p>The firing probability at the highest possible value.</p>
</div></blockquote>
<p><strong>init</strong> : int or None</p>
<blockquote>
<div><p>The starting point of the pseudo-random walk through the examples.
If the value is <cite>None</cite>, it is chosen randomly with uniform probability.</p>
</div></blockquote>
<p><strong>advance</strong> : int</p>
<blockquote>
<div><p>A large number that determines the next sample.
If this value is not touched, it will generate pseudo-random walks starting deterministically from <cite>init</cite>.</p>
</div></blockquote>
<p><strong>include_label</strong> : bool</p>
<blockquote>
<div><p>Whether to include an additional channel carrying the labels or not (default: <cite>False</cite>)</p>
</div></blockquote>
<p><strong>buffer</strong> : <cite>torch.Tensor</cite></p>
<blockquote class="last">
<div><p>the MNIST dataset</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#convis.streams.MNISTStream" title="convis.streams.MNISTStream"><code class="xref py py-obj docutils literal"><span class="pre">convis.streams.MNISTStream</span></code></a>, <a class="reference internal" href="#convis.streams.PseudoNMNIST" title="convis.streams.PseudoNMNIST"><code class="xref py py-obj docutils literal"><span class="pre">convis.streams.PseudoNMNIST</span></code></a></p>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">convis</span>
<span class="kn">from</span> <span class="nn">matplotlib.pylab</span> <span class="kn">import</span> <span class="n">plot</span><span class="p">,</span> <span class="n">xlim</span><span class="p">,</span> <span class="n">gcf</span>
<span class="n">stream</span> <span class="o">=</span> <span class="n">convis</span><span class="o">.</span><span class="n">streams</span><span class="o">.</span><span class="n">PoissonMNISTStream</span><span class="p">(</span><span class="s1">&#39;../data&#39;</span><span class="p">,</span><span class="n">rep</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span><span class="n">fr</span><span class="o">=</span><span class="mf">0.20</span><span class="p">)</span>
<span class="c1"># here we are using a very high firing rate for easy visualization</span>
<span class="c1"># (20% of cells are active in each frame)</span>
<span class="n">convis</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">500</span><span class="p">))</span>
<span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">convis</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">500</span><span class="p">))</span>
<span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">stream</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span> <span class="c1"># returning to the start</span>
<span class="n">convis</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">500</span><span class="p">))</span>
<span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href=".//docs_streams-6.py">Source code</a>, <a class="reference external" href=".//docs_streams-6.png">png</a>, <a class="reference external" href=".//docs_streams-6.hires.png">hires.png</a>, <a class="reference external" href=".//docs_streams-6.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/docs_streams-6.png" src="_images/docs_streams-6.png" />
</div>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="86%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>i</strong></td>
<td>(int) index of current image.</td>
</tr>
<tr class="row-even"><td><strong>j</strong></td>
<td>(int) number of repetitions already displayed (secondary index)</td>
</tr>
<tr class="row-odd"><td><strong>init_i</strong></td>
<td>(int) The initial starting point of the walk.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="convis.streams.PoissonMNISTStream.reset">
<code class="descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/streams.html#PoissonMNISTStream.reset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.streams.PoissonMNISTStream.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the random walk to the starting point (<cite>self.init_i</cite>).</p>
</dd></dl>

<dl class="method">
<dt id="convis.streams.PoissonMNISTStream.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>i=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/streams.html#PoissonMNISTStream.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.streams.PoissonMNISTStream.get" title="Permalink to this definition">¶</a></dt>
<dd><p>outputs the next slice of length <cite>i</cite> in the stream (see <a class="reference internal" href="#convis.streams.Stream" title="convis.streams.Stream"><code class="xref py py-meth docutils literal"><span class="pre">convis.streams.Stream()</span></code></a>)</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="convis.streams.PseudoNMNIST">
<em class="property">class </em><code class="descclassname">convis.streams.</code><code class="descname">PseudoNMNIST</code><span class="sig-paren">(</span><em>mnist_data_folder='../data/'</em>, <em>threshold=5.0</em>, <em>output_size=(34</em>, <em>34)</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/streams.html#PseudoNMNIST"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.streams.PseudoNMNIST" title="Permalink to this definition">¶</a></dt>
<dd><p>A motion driven conversion of MNIST into spikes. A quick way to get spiking input.</p>
<p>Internally, it defines a Layer that performs three predetermined “saccades” (see the source code if you want to use it as a Saccade generator in other contexts).
It uses a <a class="reference internal" href="filters.html#convis.filters.spiking.IntegrativeMotionSensor" title="convis.filters.spiking.IntegrativeMotionSensor"><code class="xref py py-class docutils literal"><span class="pre">IntegrativeMotionSensor</span></code></a> to generate spikes from the movement.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.6.4.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>mnist_data_folder</strong> : str</p>
<blockquote>
<div><p>Where to find (or download to) the MNIST dataset. (see <a class="reference internal" href="#convis.streams.MNISTStream" title="convis.streams.MNISTStream"><code class="xref py py-class docutils literal"><span class="pre">convis.streams.MNISTStream</span></code></a>)</p>
</div></blockquote>
<p><strong>threshold</strong> : float</p>
<blockquote>
<div><p>the sensitivity of the motion detection (smaller values are more sensitive)</p>
</div></blockquote>
<p><strong>output_size</strong> : tuple(int,int)</p>
<blockquote class="last">
<div><p>size of the generated output (the data is padded with zeros)</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">convis</span>
<span class="n">n</span> <span class="o">=</span> <span class="n">convis</span><span class="o">.</span><span class="n">streams</span><span class="o">.</span><span class="n">PseudoNMNIST</span><span class="p">()</span>
<span class="n">convis</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">200</span><span class="p">))</span>
</pre></div>
</div>
<p>(<a class="reference external" href=".//docs_streams-7.py">Source code</a>, <a class="reference external" href=".//docs_streams-7.png">png</a>, <a class="reference external" href=".//docs_streams-7.hires.png">hires.png</a>, <a class="reference external" href=".//docs_streams-7.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/docs_streams-7.png" src="_images/docs_streams-7.png" />
</div>
</dd></dl>

</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="docs_optimizer.html" class="btn btn-neutral float-right" title="Optimizers convis.optimizer" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="docs_retina.html" class="btn btn-neutral" title="VirtualRetina-like Simulator" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Jacob Huth.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.6.4',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>