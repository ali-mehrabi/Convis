

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>VirtualRetina-like Simulator &mdash; convis 0.6.4 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="convis 0.6.4 documentation" href="index.html"/>
        <link rel="up" title="The API: Convis classes and modules" href="docs.html"/>
        <link rel="next" title="Streams convis.streams" href="docs_streams.html"/>
        <link rel="prev" title="Models in convis.models" href="docs_models.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> convis
          

          
          </a>

          
            
            
              <div class="version">
                0.6
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Get Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>
<p class="caption"><span class="caption-text">Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="filters.html">Filters and Layers</a></li>
<li class="toctree-l1"><a class="reference internal" href="pytorch_basics.html">PyTorch Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="pytorch_basics.html#pytorch-extensions-in-convis">PyTorch Extensions in Convis</a></li>
<li class="toctree-l1"><a class="reference internal" href="model.html">Models</a></li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="docs.html">The API: Convis classes and modules</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="docs_filters.html">Filters <cite>convis.filters</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="docs_models.html">Models in <cite>convis.models</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="docs_models.html#module-convis.layers">Finding all Layers in one submodules <cite>convis.layers</cite></a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">VirtualRetina-like Simulator</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#general-overview">General Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#references">References</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-convis.retina"><cite>convis.retina</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-convis.filters.retina"><cite>convis.filters.retina</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="#convis-retina-virtualretina"><cite>convis.retina_virtualretina</cite></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="docs_streams.html">Streams <cite>convis.streams</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="docs_optimizer.html">Optimizers <cite>convis.optimizer</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="docs_tests.html">Automatic Tests <cite>convis.tests</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="docs.html#module-convis.base">Base classes <cite>convis.base</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="docs.html#variables-convis-variables">Variables <cite>convis.variables</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="docs.html#module-convis.utils">Utilitary methods <cite>convis.utils</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="docs.html#sample-data-convis-samples">Sample Data <cite>convis.samples</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="docs.html#module-convis.variable_describe">Methods to describe objects <cite>convis.variable_describe</cite></a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">convis</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="docs.html">The API: Convis classes and modules</a> &raquo;</li>
        
      <li>VirtualRetina-like Simulator</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/docs_retina.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="virtualretina-like-simulator">
<h1>VirtualRetina-like Simulator<a class="headerlink" href="#virtualretina-like-simulator" title="Permalink to this headline">¶</a></h1>
<p>The <a class="reference internal" href="#convis.retina.Retina" title="convis.retina.Retina"><code class="xref py py-class docutils literal"><span class="pre">Retina</span></code></a> model combines filters from
<a class="reference internal" href="#module-convis.filters.retina" title="convis.filters.retina"><code class="xref py py-mod docutils literal"><span class="pre">convis.filters.retina</span></code></a> into a complete model, similar
to VirtualRetina <a class="reference internal" href="#wohrer2009" id="id1">[Wohrer2009]</a>.
To load the same xml configuration as VirtualRetina, the
module <a class="reference internal" href="#module-convis.retina_virtualretina" title="convis.retina_virtualretina"><code class="xref py py-mod docutils literal"><span class="pre">convis.retina_virtualretina</span></code></a> provides a
<a class="reference internal" href="#convis.retina_virtualretina.RetinaConfiguration" title="convis.retina_virtualretina.RetinaConfiguration"><code class="xref py py-class docutils literal"><span class="pre">RetinaConfiguration</span></code></a> object
and a default configuration.</p>
<div class="section" id="general-overview">
<h2>General Overview<a class="headerlink" href="#general-overview" title="Permalink to this headline">¶</a></h2>
<p>The layers that create the model are:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="#convis.filters.retina.OPL" title="convis.filters.retina.OPL"><code class="xref py py-class docutils literal"><span class="pre">OPL</span></code></a></li>
<li><a class="reference internal" href="#convis.filters.retina.Bipolar" title="convis.filters.retina.Bipolar"><code class="xref py py-class docutils literal"><span class="pre">Bipolar</span></code></a></li>
<li><a class="reference internal" href="#convis.filters.retina.GanglionInput" title="convis.filters.retina.GanglionInput"><code class="xref py py-class docutils literal"><span class="pre">GanglionInput</span></code></a></li>
<li><a class="reference internal" href="#convis.filters.retina.GanglionSpiking" title="convis.filters.retina.GanglionSpiking"><code class="xref py py-class docutils literal"><span class="pre">GanglionSpiking</span></code></a></li>
</ul>
</div></blockquote>
<p>The formulas on which the classes are based are:</p>
<p><a class="reference internal" href="#convis.filters.retina.OPL" title="convis.filters.retina.OPL"><code class="xref py py-class docutils literal"><span class="pre">OPL</span></code></a> transforms the input with set of
linear filters to a center signal <span class="math">\(C\)</span> and a surround signal <span class="math">\(S\)</span>
which is subtracted to get the output current <span class="math">\(I_{OLP}\)</span>:
$$C(x,y,t) = G * T(wu,Tu) * E(n,t) * L (x,y,t)$$
$$S(x,y,t) = G * E * C(x,y,t)$$
$$I_{OLP}(x,y,t) = \lambda_{OPL}(C(x,y,t) - w_{OPL} S(x,y,t)_)$$
<span class="math">\(L\)</span> is the luminance input,
<span class="math">\(G\)</span> are spatial (different) filters,
<span class="math">\(T\)</span> and <span class="math">\(E\)</span> are temporal filters,
<span class="math">\(\lambda_{OPL}\)</span> and <span class="math">\(w_{OPL}\)</span> are scalar weights.
Subscripts of the filters are omitted (<span class="math">\(G\)</span> instead of <span class="math">\(G_C\)</span>),
but they should be thought of as each being a specific, unique filter.</p>
<p>Here <span class="math">\(*\)</span> is a convolution operator.</p>
<p><a class="reference internal" href="#convis.filters.retina.Bipolar" title="convis.filters.retina.Bipolar"><code class="xref py py-class docutils literal"><span class="pre">Bipolar</span></code></a> implements contrast gain control with a differential equation:
$$\frac{dV_{Bip}}{dt} (x,y,t) = I_{OLP}(x,y,t) - g_{A}(x,y,t)dV_{Bip}(x,y,t)$$</p>
<blockquote>
<div><ul class="simple">
<li>with <span class="math">\(g_{A}(x,y,t) = G * E * Q(V{Bip})(x,y,t)\)</span></li>
<li>and <span class="math">\(Q(V{Bip}) = g_{A}^{0} + \lambda_{A}V^2_{Bip}\)</span></li>
<li><span class="math">\(G\)</span> and <span class="math">\(E\)</span> are again filters</li>
</ul>
</div></blockquote>
<p><a class="reference internal" href="#convis.filters.retina.GanglionInput" title="convis.filters.retina.GanglionInput"><code class="xref py py-class docutils literal"><span class="pre">GanglionInput</span></code></a> applies a static nonlinearity and another spatial linear filter:
$$I_{Gang}(x,y,t) = G * N(T * V_{Bip})$$</p>
<blockquote>
<div><ul class="simple">
<li>with <span class="math">\(N(V) = \frac{i^0_G}{1-\lambda(V-v^0_G)/i^0_G}\)</span> if <span class="math">\(V &lt; v^0_G\)</span></li>
<li>and <span class="math">\(N(V) = i^0_G + \lambda(V-v^0_G)\)</span> if  <span class="math">\(V &gt; v^0_G\)</span></li>
</ul>
</div></blockquote>
<p>And finally a spiking mechanism <a class="reference internal" href="#convis.filters.retina.GanglionSpiking" title="convis.filters.retina.GanglionSpiking"><code class="xref py py-class docutils literal"><span class="pre">GanglionSpiking</span></code></a> is implemented by another differential equation:</p>
<p>$$ \dfrac{ dV(x,y) }{dt} = I_{Gang}(x,y,t) - g^L V(x,y,t) + \eta_v(t)$$</p>
<blockquote>
<div><ul class="simple">
<li><span class="math">\(V\)</span> values above 1 set a refractory variable to a randomly drawn value</li>
<li>while the refractory value is larger than 0, <span class="math">\(V\)</span> of that pixel is set to 0 and the refractory variable is decremented</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<table class="docutils citation" frame="void" id="wohrer2009" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[Wohrer2009]</a></td><td>Wohrer, A., &amp; Kornprobst, P. (2009).
Virtual Retina: a biological retina model and simulator, with contrast gain control.
Journal of Computational Neuroscience, 26(2), 219-49. <a class="reference external" href="http://doi.org/10.1007/s10827-008-0108-4">http://doi.org/10.1007/s10827-008-0108-4</a></td></tr>
</tbody>
</table>
</div>
<div class="section" id="module-convis.retina">
<span id="convis-retina"></span><h2><cite>convis.retina</cite><a class="headerlink" href="#module-convis.retina" title="Permalink to this headline">¶</a></h2>
<p>This module provides the retina model.</p>
<dl class="class">
<dt id="convis.retina.Retina">
<em class="property">class </em><code class="descclassname">convis.retina.</code><code class="descname">Retina</code><span class="sig-paren">(</span><em>opl=True</em>, <em>bipolar=True</em>, <em>gang=True</em>, <em>spikes=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/retina.html#Retina"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.retina.Retina" title="Permalink to this definition">¶</a></dt>
<dd><p>A retinal ganglion cell model comparable to VirtualRetina <a class="reference internal" href="#wohrer200923" id="id2">[Wohrer200923]</a>.</p>
<table class="docutils citation" frame="void" id="wohrer200923" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[Wohrer200923]</a></td><td>Wohrer, A., &amp; Kornprobst, P. (2009).
Virtual Retina: a biological retina model and simulator, with contrast gain control.
Journal of Computational Neuroscience, 26(2), 219-49. <a class="reference external" href="http://doi.org/10.1007/s10827-008-0108-4">http://doi.org/10.1007/s10827-008-0108-4</a></td></tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="docs.html#convis.base.Layer" title="convis.base.Layer"><code class="xref py py-obj docutils literal"><span class="pre">convis.base.Layer</span></code></a></dt>
<dd>The Layer base class, providing chunking and optimization</dd>
<dt><a class="reference internal" href="#convis.filters.retina.OPL" title="convis.filters.retina.OPL"><code class="xref py py-obj docutils literal"><span class="pre">convis.filters.retina.OPL</span></code></a></dt>
<dd>The outer plexiform layer performs luminance to contrast conversion</dd>
<dt><a class="reference internal" href="#convis.filters.retina.Bipolar" title="convis.filters.retina.Bipolar"><code class="xref py py-obj docutils literal"><span class="pre">convis.filters.retina.Bipolar</span></code></a></dt>
<dd>provides contrast gain control</dd>
<dt><a class="reference internal" href="#convis.filters.retina.GanglionInput" title="convis.filters.retina.GanglionInput"><code class="xref py py-obj docutils literal"><span class="pre">convis.filters.retina.GanglionInput</span></code></a></dt>
<dd>provides a static non-linearity and a last spatial integration</dd>
<dt><a class="reference internal" href="#convis.filters.retina.GanglionSpiking" title="convis.filters.retina.GanglionSpiking"><code class="xref py py-obj docutils literal"><span class="pre">convis.filters.retina.GanglionSpiking</span></code></a></dt>
<dd>creates spikes from an input current</dd>
</dl>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">convis</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pylab</span> <span class="k">as</span> <span class="n">plt</span>
<span class="n">retina</span> <span class="o">=</span> <span class="n">convis</span><span class="o">.</span><span class="n">retina</span><span class="o">.</span><span class="n">Retina</span><span class="p">()</span>
<span class="n">inp</span> <span class="o">=</span> <span class="n">convis</span><span class="o">.</span><span class="n">samples</span><span class="o">.</span><span class="n">moving_grating</span><span class="p">(</span><span class="mi">2000</span><span class="p">)</span>
<span class="n">inp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span><span class="n">inp</span><span class="p">[:</span><span class="mi">1000</span><span class="p">],</span><span class="mf">2.0</span><span class="o">*</span><span class="n">inp</span><span class="p">[</span><span class="mi">1000</span><span class="p">:</span><span class="mi">1500</span><span class="p">],</span><span class="n">inp</span><span class="p">[</span><span class="mi">1500</span><span class="p">:</span><span class="mi">2000</span><span class="p">]],</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">o_init</span> <span class="o">=</span> <span class="n">retina</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inp</span><span class="p">[:</span><span class="mi">500</span><span class="p">],</span><span class="n">dt</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
<span class="n">o</span> <span class="o">=</span> <span class="n">retina</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inp</span><span class="p">[</span><span class="mi">500</span><span class="p">:],</span><span class="n">dt</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
<span class="n">convis</span><span class="o">.</span><span class="n">plot_5d_time</span><span class="p">(</span><span class="n">o</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">mean</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span> <span class="c1"># plots the mean activity over time</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">retina</span> <span class="o">=</span> <span class="n">convis</span><span class="o">.</span><span class="n">retina</span><span class="o">.</span><span class="n">Retina</span><span class="p">(</span><span class="n">opl</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">bipolar</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">gang</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">spikes</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">o_init</span> <span class="o">=</span> <span class="n">retina</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inp</span><span class="p">[:</span><span class="mi">500</span><span class="p">],</span><span class="n">dt</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
<span class="n">o</span> <span class="o">=</span> <span class="n">retina</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inp</span><span class="p">[</span><span class="mi">500</span><span class="p">:],</span><span class="n">dt</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
<span class="n">convis</span><span class="o">.</span><span class="n">plot_5d_time</span><span class="p">(</span><span class="n">o</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">mean</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span> <span class="c1"># plots the mean activity over time</span>
<span class="n">convis</span><span class="o">.</span><span class="n">plot_5d_time</span><span class="p">(</span><span class="n">o</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span> <span class="c1"># plots a line for each pixel</span>
</pre></div>
</div>
<p>(<a class="reference external" href=".//docs_retina-1.py">Source code</a>)</p>
<div class="figure" id="id3">
<img alt="_images/docs_retina-1_00.png" src="_images/docs_retina-1_00.png" />
<p class="caption"><span class="caption-text">(<a class="reference external" href=".//docs_retina-1_00.png">png</a>, <a class="reference external" href=".//docs_retina-1_00.hires.png">hires.png</a>, <a class="reference external" href=".//docs_retina-1_00.pdf">pdf</a>)</span></p>
</div>
<div class="figure" id="id4">
<img alt="_images/docs_retina-1_01.png" src="_images/docs_retina-1_01.png" />
<p class="caption"><span class="caption-text">(<a class="reference external" href=".//docs_retina-1_01.png">png</a>, <a class="reference external" href=".//docs_retina-1_01.hires.png">hires.png</a>, <a class="reference external" href=".//docs_retina-1_01.pdf">pdf</a>)</span></p>
</div>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>opl</strong></td>
<td>(Layer (convis.filters.retina.OPL))</td>
</tr>
<tr class="row-even"><td><strong>bipolar</strong></td>
<td>(Layer (convis.filters.retina.Bipolar))</td>
</tr>
<tr class="row-odd"><td><strong>gang_0_input</strong></td>
<td>(Layer (convis.filters.retina.GanglionInput))</td>
</tr>
<tr class="row-even"><td><strong>gang_0_spikes</strong></td>
<td>(Layer (convis.filters.retina.GanglionSpiking))</td>
</tr>
<tr class="row-odd"><td><strong>gang_1_input</strong></td>
<td>(Layer (convis.filters.retina.GanglionInput))</td>
</tr>
<tr class="row-even"><td><strong>gang_1_spikes</strong></td>
<td>(Layer (convis.filters.retina.GanglionSpiking))</td>
</tr>
<tr class="row-odd"><td><strong>_timing</strong></td>
<td>(list of tuples) timing information of the last run (last chunk) Each entry is a tuple of (function that was executed, number of seconds it took to execute)</td>
</tr>
<tr class="row-even"><td><strong>keep_timing_info</strong></td>
<td>(bool) whether to store all timing information in a list</td>
</tr>
<tr class="row-odd"><td><strong>timing_info</strong></td>
<td>(list) stores timing information of all runs if <cite>keep_timing_info</cite> is True.</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-convis.filters.retina">
<span id="convis-filters-retina"></span><h2><cite>convis.filters.retina</cite><a class="headerlink" href="#module-convis.filters.retina" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="convis.filters.retina.SeperatableOPLFilter">
<em class="property">class </em><code class="descclassname">convis.filters.retina.</code><code class="descname">SeperatableOPLFilter</code><a class="reference internal" href="_modules/convis/filters/retina.html#SeperatableOPLFilter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.filters.retina.SeperatableOPLFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>A fullly convolutional OPL implementation.</p>
<p>All filters are implemented as convolutions which
makes this layer a lot slower than <a class="reference internal" href="#convis.filters.retina.HalfRecursiveOPLFilter" title="convis.filters.retina.HalfRecursiveOPLFilter"><code class="xref py py-class docutils literal"><span class="pre">HalfRecursiveOPLFilter</span></code></a>.</p>
<p>The following virtual parameters set the corresponding
tensors with convolution filters. Eg. they turn 
the standard deviation of the gaussian into a
numerical, circular gaussian.</p>
<p>You can set them to a value via <cite>.set(value)</cite> which will
trigger them to re-calculate the filters.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#convis.retina.Retina" title="convis.retina.Retina"><code class="xref py py-obj docutils literal"><span class="pre">convis.retina.Retina</span></code></a>, <a class="reference internal" href="#convis.filters.retina.OPL" title="convis.filters.retina.OPL"><code class="xref py py-obj docutils literal"><span class="pre">OPL</span></code></a>, <a class="reference internal" href="#convis.filters.retina.HalfRecursiveOPLFilter" title="convis.filters.retina.HalfRecursiveOPLFilter"><code class="xref py py-obj docutils literal"><span class="pre">HalfRecursiveOPLFilter</span></code></a>, <a class="reference internal" href="#convis.filters.retina.FullConvolutionOPLFilter" title="convis.filters.retina.FullConvolutionOPLFilter"><code class="xref py py-obj docutils literal"><span class="pre">FullConvolutionOPLFilter</span></code></a></p>
</div>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="64%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>sigma_center</strong></td>
<td>(virtual parameter) Size of the center receptive field</td>
</tr>
<tr class="row-even"><td><strong>tau_center</strong></td>
<td>(virtual parameter) Time constant of the center receptive field</td>
</tr>
<tr class="row-odd"><td><strong>n_center</strong></td>
<td>(virtual parameter) number of cascading exponential filters</td>
</tr>
<tr class="row-even"><td><strong>undershoot_tau_center</strong></td>
<td>(virtual parameter) time constant of the high pass filter</td>
</tr>
<tr class="row-odd"><td><strong>undershoot_relative_weight_center</strong></td>
<td>(virtual parameter) relative weight of the high pass filter</td>
</tr>
<tr class="row-even"><td><strong>sigma_surround</strong></td>
<td>(virtual parameter) Size of the surround receptive field</td>
</tr>
<tr class="row-odd"><td><strong>tau_surround</strong></td>
<td>(virtual parameter) Time constant of the surround receptive field</td>
</tr>
<tr class="row-even"><td><strong>relative_weight</strong></td>
<td>(virtual parameter) relative weight between center and surround</td>
</tr>
<tr class="row-odd"><td><strong>center_G</strong></td>
<td>Spatial convolution filter for the center receptive field</td>
</tr>
<tr class="row-even"><td><strong>center_E</strong></td>
<td>recursive temporal filter for the center receptive field</td>
</tr>
<tr class="row-odd"><td><strong>surround_G</strong></td>
<td>Spatial convolution filter for the surround receptive field</td>
</tr>
<tr class="row-even"><td><strong>surround_E</strong></td>
<td>recursive temporal filter for the surround receptive field</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="convis.filters.retina.HalfRecursiveOPLFilter">
<em class="property">class </em><code class="descclassname">convis.filters.retina.</code><code class="descname">HalfRecursiveOPLFilter</code><a class="reference internal" href="_modules/convis/filters/retina.html#HalfRecursiveOPLFilter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.filters.retina.HalfRecursiveOPLFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>The default OPL implementation.</p>
<p>Temporal filters are implemented recursively and
spatial filters are convolution filters.</p>
<p>The following virtual parameters set the corresponding
tensors with convolution filters. Eg. they turn 
the standard deviation of the gaussian into a
numerical, circular gaussian.</p>
<p>You can set them to a value via <cite>.set(value)</cite> which will
trigger them to re-calculate the filters.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#convis.retina.Retina" title="convis.retina.Retina"><code class="xref py py-obj docutils literal"><span class="pre">convis.retina.Retina</span></code></a>, <a class="reference internal" href="#convis.filters.retina.OPL" title="convis.filters.retina.OPL"><code class="xref py py-obj docutils literal"><span class="pre">OPL</span></code></a>, <a class="reference internal" href="#convis.filters.retina.SeperatableOPLFilter" title="convis.filters.retina.SeperatableOPLFilter"><code class="xref py py-obj docutils literal"><span class="pre">SeperatableOPLFilter</span></code></a>, <a class="reference internal" href="#convis.filters.retina.FullConvolutionOPLFilter" title="convis.filters.retina.FullConvolutionOPLFilter"><code class="xref py py-obj docutils literal"><span class="pre">FullConvolutionOPLFilter</span></code></a></p>
</div>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="68%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>sigma_center</strong></td>
<td>(virtual parameter) Size of the center receptive field</td>
</tr>
<tr class="row-even"><td><strong>tau_center</strong></td>
<td>(virtual parameter) Time constant of the center receptive field</td>
</tr>
<tr class="row-odd"><td><strong>n_center</strong></td>
<td>(virtual parameter) number of cascading exponential filters</td>
</tr>
<tr class="row-even"><td><strong>undershoot_tau_center</strong></td>
<td>(virtual parameter) time constant of the high pass filter</td>
</tr>
<tr class="row-odd"><td><strong>undershoot_relative_weight_center</strong></td>
<td>(virtual parameter) relative weight of the high pass filter</td>
</tr>
<tr class="row-even"><td><strong>sigma_surround</strong></td>
<td>(virtual parameter) Size of the surround receptive field</td>
</tr>
<tr class="row-odd"><td><strong>tau_surround</strong></td>
<td>(virtual parameter) Time constant of the surround receptive field</td>
</tr>
<tr class="row-even"><td><strong>relative_weight</strong></td>
<td>(virtual parameter) relative weight between center and surround</td>
</tr>
<tr class="row-odd"><td><strong>center_G</strong></td>
<td>(Conv3d) Spatial convolution filter for the center receptive field</td>
</tr>
<tr class="row-even"><td><strong>center_E</strong></td>
<td>(Recursive Filter) recursive temporal filter for the center receptive field</td>
</tr>
<tr class="row-odd"><td><strong>surround_G</strong></td>
<td>(Conv3d) Spatial convolution filter for the surround receptive field</td>
</tr>
<tr class="row-even"><td><strong>surround_E</strong></td>
<td>(Recursive Filter) recursive temporal filter for the surround receptive field</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="convis.filters.retina.RecursiveOPLFilter">
<em class="property">class </em><code class="descclassname">convis.filters.retina.</code><code class="descname">RecursiveOPLFilter</code><a class="reference internal" href="_modules/convis/filters/retina.html#RecursiveOPLFilter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.filters.retina.RecursiveOPLFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>The most efficient OPL implementation.</p>
<p>Temporal and spatial filters are implemented recursively.</p>
<p>The following virtual parameters set the corresponding
tensors with convolution filters. Eg. they turn 
the standard deviation of the gaussian into a
numerical, circular gaussian.</p>
<p>You can set them to a value via <cite>.set(value)</cite> which will
trigger them to re-calculate the filters.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#convis.retina.Retina" title="convis.retina.Retina"><code class="xref py py-obj docutils literal"><span class="pre">convis.retina.Retina</span></code></a>, <a class="reference internal" href="#convis.filters.retina.OPL" title="convis.filters.retina.OPL"><code class="xref py py-obj docutils literal"><span class="pre">OPL</span></code></a>, <a class="reference internal" href="#convis.filters.retina.SeperatableOPLFilter" title="convis.filters.retina.SeperatableOPLFilter"><code class="xref py py-obj docutils literal"><span class="pre">SeperatableOPLFilter</span></code></a>, <a class="reference internal" href="#convis.filters.retina.FullConvolutionOPLFilter" title="convis.filters.retina.FullConvolutionOPLFilter"><code class="xref py py-obj docutils literal"><span class="pre">FullConvolutionOPLFilter</span></code></a></p>
</div>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="68%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>sigma_center</strong></td>
<td>(virtual parameter) Size of the center receptive field</td>
</tr>
<tr class="row-even"><td><strong>tau_center</strong></td>
<td>(virtual parameter) Time constant of the center receptive field</td>
</tr>
<tr class="row-odd"><td><strong>n_center</strong></td>
<td>(virtual parameter) number of cascading exponential filters</td>
</tr>
<tr class="row-even"><td><strong>undershoot_tau_center</strong></td>
<td>(virtual parameter) time constant of the high pass filter</td>
</tr>
<tr class="row-odd"><td><strong>undershoot_relative_weight_center</strong></td>
<td>(virtual parameter) relative weight of the high pass filter</td>
</tr>
<tr class="row-even"><td><strong>sigma_surround</strong></td>
<td>(virtual parameter) Size of the surround receptive field</td>
</tr>
<tr class="row-odd"><td><strong>tau_surround</strong></td>
<td>(virtual parameter) Time constant of the surround receptive field</td>
</tr>
<tr class="row-even"><td><strong>relative_weight</strong></td>
<td>(virtual parameter) relative weight between center and surround</td>
</tr>
<tr class="row-odd"><td><strong>center_G</strong></td>
<td>(Conv3d) Spatial convolution filter for the center receptive field</td>
</tr>
<tr class="row-even"><td><strong>center_E</strong></td>
<td>(Recursive Filter) recursive temporal filter for the center receptive field</td>
</tr>
<tr class="row-odd"><td><strong>surround_G</strong></td>
<td>(Conv3d) Spatial convolution filter for the surround receptive field</td>
</tr>
<tr class="row-even"><td><strong>surround_E</strong></td>
<td>(Recursive Filter) recursive temporal filter for the surround receptive field</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="convis.filters.retina.FullConvolutionOPLFilter">
<em class="property">class </em><code class="descclassname">convis.filters.retina.</code><code class="descname">FullConvolutionOPLFilter</code><span class="sig-paren">(</span><em>shp=(100</em>, <em>10</em>, <em>10)</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/filters/retina.html#FullConvolutionOPLFilter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.filters.retina.FullConvolutionOPLFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Convolution OPL Filter</p>
<p>The VirtualParameters of the model create a 3d convolution filter.
Any time they are changed, the current filter will be replaced!
The VirtualParameters can not be optimized, only the 
convolution filter will change when using an optimizer.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#convis.retina.Retina" title="convis.retina.Retina"><code class="xref py py-obj docutils literal"><span class="pre">convis.retina.Retina</span></code></a>, <a class="reference internal" href="#convis.filters.retina.OPL" title="convis.filters.retina.OPL"><code class="xref py py-obj docutils literal"><span class="pre">OPL</span></code></a>, <a class="reference internal" href="#convis.filters.retina.HalfRecursiveOPLFilter" title="convis.filters.retina.HalfRecursiveOPLFilter"><code class="xref py py-obj docutils literal"><span class="pre">HalfRecursiveOPLFilter</span></code></a>, <a class="reference internal" href="#convis.filters.retina.SeperatableOPLFilter" title="convis.filters.retina.SeperatableOPLFilter"><code class="xref py py-obj docutils literal"><span class="pre">SeperatableOPLFilter</span></code></a></p>
</div>
</dd></dl>

<dl class="class">
<dt id="convis.filters.retina.OPL">
<em class="property">class </em><code class="descclassname">convis.filters.retina.</code><code class="descname">OPL</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/filters/retina.html#OPL"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.filters.retina.OPL" title="Permalink to this definition">¶</a></dt>
<dd><p>The OPL current is a filtered version of the luminance input with spatial and temporal kernels.</p>
<p>$$I_{OLP}(x,y,t) = lambda_{OPL}(C(x,y,t) - w_{OPL} S(x,y,t)_)$$</p>
<p>with:</p>
<p><span class="math">\(C(x,y,t) = G * T(wu,Tu) * E(n,t) * L (x,y,t)\)</span></p>
<p><span class="math">\(S(x,y,t) = G * E * C(x,y,t)\)</span></p>
<p>In the case of leaky heat equation:</p>
<p><span class="math">\(C(x,y,t) = T(wu,Tu) * K(sigma_C,Tau_C) * L (x,y,t)\)</span></p>
<p><span class="math">\(S(x,y,t) = K(sigma_S,Tau_S) * C(x,y,t)\)</span>
p.275</p>
<p>This Layer can use one of multiple implementations. <a class="reference internal" href="#convis.filters.retina.HalfRecursiveOPLFilter" title="convis.filters.retina.HalfRecursiveOPLFilter"><code class="xref py py-class docutils literal"><span class="pre">HalfRecursiveOPLFilter</span></code></a>
and <a class="reference internal" href="#convis.filters.retina.SeperatableOPLFilter" title="convis.filters.retina.SeperatableOPLFilter"><code class="xref py py-class docutils literal"><span class="pre">SeperatableOPLFilter</span></code></a> both accept the same configuration attributes.
Or <a class="reference internal" href="#convis.filters.retina.FullConvolutionOPLFilter" title="convis.filters.retina.FullConvolutionOPLFilter"><code class="xref py py-class docutils literal"><span class="pre">FullConvolutionOPLFilter</span></code></a> which does not accept the
parameters, but offers a single, non-separable convolution filter.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#convis.retina.Retina" title="convis.retina.Retina"><code class="xref py py-obj docutils literal"><span class="pre">convis.retina.Retina</span></code></a>, <a class="reference internal" href="#convis.filters.retina.HalfRecursiveOPLFilter" title="convis.filters.retina.HalfRecursiveOPLFilter"><code class="xref py py-obj docutils literal"><span class="pre">HalfRecursiveOPLFilter</span></code></a>, <a class="reference internal" href="#convis.filters.retina.SeperatableOPLFilter" title="convis.filters.retina.SeperatableOPLFilter"><code class="xref py py-obj docutils literal"><span class="pre">SeperatableOPLFilter</span></code></a>, <a class="reference internal" href="#convis.filters.retina.FullConvolutionOPLFilter" title="convis.filters.retina.FullConvolutionOPLFilter"><code class="xref py py-obj docutils literal"><span class="pre">FullConvolutionOPLFilter</span></code></a></p>
</div>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="92%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>opl_filter</strong></td>
<td>(Layer) The OPL filter that is used. Either <a class="reference internal" href="#convis.filters.retina.HalfRecursiveOPLFilter" title="convis.filters.retina.HalfRecursiveOPLFilter"><code class="xref py py-class docutils literal"><span class="pre">HalfRecursiveOPLFilter</span></code></a>, <a class="reference internal" href="#convis.filters.retina.SeperatableOPLFilter" title="convis.filters.retina.SeperatableOPLFilter"><code class="xref py py-class docutils literal"><span class="pre">SeperatableOPLFilter</span></code></a> or <a class="reference internal" href="#convis.filters.retina.FullConvolutionOPLFilter" title="convis.filters.retina.FullConvolutionOPLFilter"><code class="xref py py-class docutils literal"><span class="pre">FullConvolutionOPLFilter</span></code></a>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="convis.filters.retina.Bipolar">
<em class="property">class </em><code class="descclassname">convis.filters.retina.</code><code class="descname">Bipolar</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/filters/retina.html#Bipolar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.filters.retina.Bipolar" title="Permalink to this definition">¶</a></dt>
<dd><p>Example Configuration:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="s1">&#39;contrast-gain-control&#39;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">&#39;opl-amplification__Hz&#39;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span> <span class="c1"># for linear OPL: ampOPL = relative_ampOPL / fatherRetina-&gt;input_luminosity_range ;</span>
                                               <span class="c1"># `ampInputCurrent` in virtual retina</span>
    <span class="s1">&#39;bipolar-inert-leaks__Hz&#39;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>             <span class="c1"># `gLeak` in virtual retina</span>
    <span class="s1">&#39;adaptation-sigma__deg&#39;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">,</span>              <span class="c1"># `sigmaSurround` in virtual retina</span>
    <span class="s1">&#39;adaptation-tau__sec&#39;</span><span class="p">:</span> <span class="mf">0.005</span><span class="p">,</span>              <span class="c1"># `tauSurround` in virtual retina</span>
    <span class="s1">&#39;adaptation-feedback-amplification__Hz&#39;</span><span class="p">:</span> <span class="mi">0</span> <span class="c1"># `ampFeedback` in virtual retina</span>
<span class="p">},</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#convis.retina.Retina" title="convis.retina.Retina"><code class="xref py py-obj docutils literal"><span class="pre">convis.retina.Retina</span></code></a></p>
</div>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="94%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>opl-amplification__Hz</strong></td>
<td><ol class="first last arabic simple" start="50">
<li>for linear OPL: ampOPL = relative_ampOPL / fatherRetina-&gt;input_luminosity_range ; <cite>ampInputCurrent</cite> in virtual retina bipolar-inert-leaks__Hz: 50 <cite>gLeak</cite> in virtual retina adaptation-sigma__deg: 0.2 <cite>sigmaSurround</cite> in virtual retina adaptation-tau__sec: 0.005 <cite>tauSurround</cite> in virtual retina adaptation-feedback-amplification__Hz: 0 <cite>ampFeedback</cite> in virtual retina</li>
</ol>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="convis.filters.retina.GanglionInput">
<em class="property">class </em><code class="descclassname">convis.filters.retina.</code><code class="descname">GanglionInput</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/filters/retina.html#GanglionInput"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.filters.retina.GanglionInput" title="Permalink to this definition">¶</a></dt>
<dd><p>The input current to the ganglion cells is filtered through a gain function.</p>
<p><span class="math">\(I_{Gang}(x,y,t) = G * N(eT * V_{Bip})\)</span></p>
<p><span class="math">\(N(V) = \frac{i^0_G}{1-\lambda(V-v^0_G)/i^0_G}\)</span> (if <span class="math">\(V &lt; v^0_G\)</span>)</p>
<p><span class="math">\(N(V) = i^0_G + \lambda(V-v^0_G)\)</span> (if <span class="math">\(V &gt; v^0_G\)</span>)</p>
<blockquote>
<div><p>Example configuration:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Parvocellular Off&#39;</span><span class="p">,</span>
    <span class="s1">&#39;enabled&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;sign&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
    <span class="s1">&#39;transient-tau__sec&#39;</span><span class="p">:</span><span class="mf">0.02</span><span class="p">,</span>
    <span class="s1">&#39;transient-relative-weight&#39;</span><span class="p">:</span><span class="mf">0.7</span><span class="p">,</span>
    <span class="s1">&#39;bipolar-linear-threshold&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
    <span class="s1">&#39;value-at-linear-threshold__Hz&#39;</span><span class="p">:</span><span class="mi">37</span><span class="p">,</span>
    <span class="s1">&#39;bipolar-amplification__Hz&#39;</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span>
    <span class="s1">&#39;sigma-pool__deg&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
    <span class="s1">&#39;spiking-channel&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="o">...</span>
    <span class="p">}</span>
<span class="p">},</span>
<span class="p">{</span>
    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Magnocellular On&#39;</span><span class="p">,</span>
    <span class="s1">&#39;enabled&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s1">&#39;sign&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s1">&#39;transient-tau__sec&#39;</span><span class="p">:</span><span class="mf">0.03</span><span class="p">,</span>
    <span class="s1">&#39;transient-relative-weight&#39;</span><span class="p">:</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="s1">&#39;bipolar-linear-threshold&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
    <span class="s1">&#39;value-at-linear-threshold__Hz&#39;</span><span class="p">:</span><span class="mi">80</span><span class="p">,</span>
    <span class="s1">&#39;bipolar-amplification__Hz&#39;</span><span class="p">:</span><span class="mi">400</span><span class="p">,</span>
    <span class="s1">&#39;sigma-pool__deg&#39;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
    <span class="s1">&#39;spiking-channel&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="o">...</span>
    <span class="p">}</span>
<span class="p">},</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#convis.retina.Retina" title="convis.retina.Retina"><code class="xref py py-obj docutils literal"><span class="pre">convis.retina.Retina</span></code></a>, <a class="reference internal" href="#convis.filters.retina.GanglionSpiking" title="convis.filters.retina.GanglionSpiking"><code class="xref py py-obj docutils literal"><span class="pre">GanglionSpiking</span></code></a></p>
</div>
<p class="rubric">Examples</p>
<p>Setting the virtual Parameters:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">convis</span><span class="o">.</span><span class="n">filters</span><span class="o">.</span><span class="n">retina</span><span class="o">.</span><span class="n">GanglionInput</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">sigma_surround</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>i_0</strong></td>
<td>(Parameter)</td>
</tr>
<tr class="row-even"><td><strong>v_0</strong></td>
<td>(Parameter)</td>
</tr>
<tr class="row-odd"><td><strong>lambda_G</strong></td>
<td>(Parameter)</td>
</tr>
<tr class="row-even"><td><strong>spatial_pooling</strong></td>
<td>(Conv3d) convolution Op for spatial pooling. Can be set to a gaussian with <code class="xref py py-meth docutils literal"><span class="pre">sigma_surround.set()</span></code></td>
</tr>
<tr class="row-odd"><td><strong>sigma_surround</strong></td>
<td>(VirtualParameter) sets spatial_pooling to be a gaussian of a certain standard deviation</td>
</tr>
<tr class="row-even"><td><strong>transient</strong></td>
<td>convolution Op for high pass filtering</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="convis.filters.retina.GanglionSpiking">
<em class="property">class </em><code class="descclassname">convis.filters.retina.</code><code class="descname">GanglionSpiking</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/filters/retina.html#GanglionSpiking"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.filters.retina.GanglionSpiking" title="Permalink to this definition">¶</a></dt>
<dd><p>The ganglion cells recieve the gain controlled input and produce spikes.</p>
<p>When the cell is not refractory, <span class="math">\(V\)</span> moves as:</p>
<p>$$ \dfrac{ dV_n }{dt} = I_{Gang}(x_n,y_n,t) - g^L V_n(t) + eta_v(t)$$</p>
<p>Otherwise it is set to 0.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#convis.retina.Retina" title="convis.retina.Retina"><code class="xref py py-obj docutils literal"><span class="pre">convis.retina.Retina</span></code></a>, <a class="reference internal" href="#convis.filters.retina.GanglionInput" title="convis.filters.retina.GanglionInput"><code class="xref py py-obj docutils literal"><span class="pre">GanglionInput</span></code></a></p>
</div>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>refr_mu</strong></td>
<td>(Parameter) The mean of the distribution of random refractory times (in seconds).</td>
</tr>
<tr class="row-even"><td><strong>refr_sigma</strong></td>
<td>(Parameter) The standard deviation of the refractory time that is randomly drawn around <cite>refr_mu</cite></td>
</tr>
<tr class="row-odd"><td><strong>noise_sigma</strong></td>
<td>(Parameter) Amount of noise added to the membrane potential.</td>
</tr>
<tr class="row-even"><td><strong>g_L</strong></td>
<td>(Parameter) Leak current (in Hz or dimensionless firing rate).</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="convis-retina-virtualretina">
<h2><cite>convis.retina_virtualretina</cite><a class="headerlink" href="#convis-retina-virtualretina" title="Permalink to this headline">¶</a></h2>
<p>This module provides compatibility and default configurations
for the convis retina model and the VirtualRetina software
package.</p>
<span class="target" id="module-convis.retina_virtualretina"></span><p>This module is a compatibility layer between the Virtual Retina configurations and behaviour and the python implementation.</p>
<dl class="class">
<dt id="convis.retina_virtualretina.RetinaConfiguration">
<em class="property">class </em><code class="descclassname">convis.retina_virtualretina.</code><code class="descname">RetinaConfiguration</code><span class="sig-paren">(</span><em>updates={}</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/retina_virtualretina.html#RetinaConfiguration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.retina_virtualretina.RetinaConfiguration" title="Permalink to this definition">¶</a></dt>
<dd><p>A configuration object that writes an xml file for VirtualRetina.</p>
<p>(When this is altered, silver.glue.RetinaConfiguration has to also be updated by hand)</p>
<p>Does not currently care to parse an xml file, but can save/load in json instead.
The defaults are equal to <cite>human.parvo.xml</cite>.</p>
<p>Values can be changed either directly in the configuration dictionary, or with the <cite>set</cite> helperfunction:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">config</span> <span class="o">=</span> <span class="n">silver</span><span class="o">.</span><span class="n">glue</span><span class="o">.</span><span class="n">RetinaConfiguration</span><span class="p">()</span>
<span class="n">config</span><span class="o">.</span><span class="n">retina_config</span><span class="p">[</span><span class="s1">&#39;retina&#39;</span><span class="p">][</span><span class="s1">&#39;input-luminosity-range&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">200</span>
<span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;basic-microsaccade-generator.enabled&#39;</span><span class="p">)</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;ganglion-layers.*.spiking-channel.sigma-V&#39;</span><span class="p">)</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="c1"># for all layers</span>
</pre></div>
</div>
<dl class="method">
<dt id="convis.retina_virtualretina.RetinaConfiguration.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>key</em>, <em>default=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/retina_virtualretina.html#RetinaConfiguration.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.retina_virtualretina.RetinaConfiguration.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves values from the configuration.</p>
<p>conf.set(“ganglion-layers.*.spiking-channel.sigma-V”,None) # gets the value for all layers
conf.set(“ganglion-layers.0”,{}) # gets the first layer</p>
</dd></dl>

<dl class="method">
<dt id="convis.retina_virtualretina.RetinaConfiguration.set">
<code class="descname">set</code><span class="sig-paren">(</span><em>key</em>, <em>value</em>, <em>layer_filter=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/retina_virtualretina.html#RetinaConfiguration.set"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.retina_virtualretina.RetinaConfiguration.set" title="Permalink to this definition">¶</a></dt>
<dd><p>shortcuts for frequent configuration values</p>
<p>Knows where to put:</p>
<blockquote>
<div>‘pixels-per-degree’, ‘size__deg’ (if x and y are equal), ‘uniform-density__inv-deg’
all attributes of linear-version
all attributes of undershoot</div></blockquote>
<p>Understands dot notation:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">conf</span> <span class="o">=</span> <span class="n">silver</span><span class="o">.</span><span class="n">glue</span><span class="o">.</span><span class="n">RetinaConfiguration</span><span class="p">()</span>
<span class="n">conf</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;ganglion-layers.2.enabled&quot;</span><span class="p">,</span><span class="kc">True</span><span class="p">)</span>
<span class="n">conf</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;ganglion-layers.*.spiking-channel.sigma-V&quot;</span><span class="p">,</span><span class="mf">0.101</span><span class="p">)</span> <span class="c1"># changes the value for all layers</span>
</pre></div>
</div>
<p>But whole sub-tree dicitonaries can be set as well (they replace, not update):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">conf</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;contrast-gain-control&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;opl-amplification__Hz&#39;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
                                    <span class="s1">&#39;bipolar-inert-leaks__Hz&#39;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
                                    <span class="s1">&#39;adaptation-sigma__deg&#39;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">,</span>
                                    <span class="s1">&#39;adaptation-tau__sec&#39;</span><span class="p">:</span> <span class="mf">0.005</span><span class="p">,</span>
                                    <span class="s1">&#39;adaptation-feedback-amplification__Hz&#39;</span><span class="p">:</span> <span class="mi">0</span>
                                <span class="p">})</span>
</pre></div>
</div>
<p>New dictionary keys are created automatically, new list elements can be created like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">conf</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;ganglion-layers.=.enabled&quot;</span><span class="p">,</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># copies all values from the last element</span>
<span class="n">conf</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;ganglion-layers.=1.enabled&quot;</span><span class="p">,</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># copies all values from list element 1</span>
<span class="n">conf</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;ganglion-layers.+.enabled&quot;</span><span class="p">,</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># creates a new (empty) dictionary which is probably underspecified</span>

<span class="n">conf</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;ganglion-layers.+&quot;</span><span class="p">,{</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Parvocellular On&#39;</span><span class="p">,</span>
            <span class="s1">&#39;enabled&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;sign&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;transient-tau__sec&#39;</span><span class="p">:</span><span class="mf">0.02</span><span class="p">,</span>
            <span class="s1">&#39;transient-relative-weight&#39;</span><span class="p">:</span><span class="mf">0.7</span><span class="p">,</span>
            <span class="s1">&#39;bipolar-linear-threshold&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;value-at-linear-threshold__Hz&#39;</span><span class="p">:</span><span class="mi">37</span><span class="p">,</span>
            <span class="s1">&#39;bipolar-amplification__Hz&#39;</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span>
            <span class="s1">&#39;spiking-channel&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;g-leak__Hz&#39;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
                <span class="s1">&#39;sigma-V&#39;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
                <span class="s1">&#39;refr-mean__sec&#39;</span><span class="p">:</span> <span class="mf">0.003</span><span class="p">,</span>
                <span class="s1">&#39;refr-stdev__sec&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s1">&#39;random-init&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s1">&#39;square-array&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;size-x__deg&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
                    <span class="s1">&#39;size-y__deg&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
                    <span class="s1">&#39;uniform-density__inv-deg&#39;</span><span class="p">:</span> <span class="mi">20</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">})</span> <span class="c1"># ganglion cell layer creates a new dicitonary</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="convis.retina_virtualretina.RetinaConfiguration.read_json">
<code class="descname">read_json</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/retina_virtualretina.html#RetinaConfiguration.read_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.retina_virtualretina.RetinaConfiguration.read_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads a full retina config json file.</p>
</dd></dl>

<dl class="method">
<dt id="convis.retina_virtualretina.RetinaConfiguration.write_json">
<code class="descname">write_json</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/retina_virtualretina.html#RetinaConfiguration.write_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.retina_virtualretina.RetinaConfiguration.write_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes a retina config json file.</p>
</dd></dl>

<dl class="method">
<dt id="convis.retina_virtualretina.RetinaConfiguration.write_xml">
<code class="descname">write_xml</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/retina_virtualretina.html#RetinaConfiguration.write_xml"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.retina_virtualretina.RetinaConfiguration.write_xml" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes a full retina config xml file.</p>
<p>Attributes that are not understood by the original Virtual Retina are removed.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="convis.retina_virtualretina.deriche_filter_density_map">
<code class="descclassname">convis.retina_virtualretina.</code><code class="descname">deriche_filter_density_map</code><span class="sig-paren">(</span><em>retina</em>, <em>sigma0=1.0</em>, <em>Nx=None</em>, <em>Ny=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/convis/retina_virtualretina.html#deriche_filter_density_map"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#convis.retina_virtualretina.deriche_filter_density_map" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a map of how strongly a point is to be blurred.</p>
<p>Relevant config options of retina:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="s1">&#39;log-polar-scheme&#39;</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s1">&#39;enabled&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;fovea-radius__deg&#39;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="s1">&#39;scaling-factor-outside-fovea__inv-deg&#39;</span><span class="p">:</span> <span class="mf">1.0</span>
<span class="p">}</span>
</pre></div>
</div>
<p>or for a circular (constant) scheme:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="s1">&#39;log-polar-scheme&#39;</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s1">&#39;enabled&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s1">&#39;fovea-radius__deg&#39;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="s1">&#39;scaling-factor-outside-fovea__inv-deg&#39;</span><span class="p">:</span> <span class="mf">1.0</span>
<span class="p">}</span> 
</pre></div>
</div>
<p>The output should be used with <cite>retina_base.deriche_coefficients</cite> to generate the coefficient maps for a Deriche filter.</p>
</dd></dl>

</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="docs_streams.html" class="btn btn-neutral float-right" title="Streams convis.streams" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="docs_models.html" class="btn btn-neutral" title="Models in convis.models" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Jacob Huth.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.6.4',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>